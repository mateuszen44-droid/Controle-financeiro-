<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1020" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Financeiro" />
  <meta name="format-detection" content="telephone=no" />

  <title>Financeiro Matheus e Tha√≠s</title>

  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./styles.css" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>

<body>
  <div class="app">
    <!-- TOPBAR -->
    <header class="topbar">
      <div class="brand">
        <div class="appicon"><span>üí∞</span></div>
        <div class="brandtxt">
          <div class="brandtitle">Financeiro</div>
          <div class="brandsub">Matheus e Tha√≠s</div>
        </div>
      </div>

      <div class="topactions">
        <button class="iconbtn" id="btnExport" title="Exportar backup">‚¨áÔ∏è</button>
        <button class="iconbtn" id="btnImport" title="Importar backup">üì•</button>
      </div>
    </header>

    <!-- PAGES -->
    <main class="pages">
      <!-- HOME -->
      <section class="page active" id="page-home">
        <section class="hero glass">
          <div class="herotop">
            <div class="herolabel">
              <div class="kicker">Total Balance</div>
              <div class="subkicker" id="monthLabel">M√™s</div>
            </div>

            <div class="monthpill">
              <select id="monthSelect" aria-label="Selecionar m√™s"></select>
              <span class="caret">‚åÑ</span>
            </div>
          </div>

          <div class="herovalue" id="balanceValue">R$ 0,00</div>

          <div class="heroactions">
            <button class="pillaction in" id="btnQuickIncome">
              <div class="pillico">Ôºã</div>
              <div class="pilltxt">
                <div class="pilltitle">Entradas</div>
                <div class="pillvalue" id="incomeValue">R$ 0,00</div>
              </div>
              <div class="pillarrow">‚Ä∫</div>
            </button>

            <button class="pillaction out" id="btnQuickExpense">
              <div class="pillico">Ôºç</div>
              <div class="pilltxt">
                <div class="pilltitle">Sa√≠das</div>
                <div class="pillvalue" id="expenseValue">R$ 0,00</div>
              </div>
              <div class="pillarrow">‚Ä∫</div>
            </button>
          </div>

          <div class="heromini">
            <div class="minicard">
              <div class="minilabel">Investido</div>
              <div class="minivalue" id="investedValue">R$ 0,00</div>
            </div>
            <div class="minicard">
              <div class="minilabel">Reserva / Caixinhas</div>
              <div class="minivalue" id="boxesValue">R$ 0,00</div>
            </div>
          </div>
        </section>

        <section class="section glass">
          <div class="sectionhead">
            <div>
              <div class="sectiontitle">Vis√£o do m√™s</div>
              <div class="sectionsub">Gr√°ficos reais (Chart.js)</div>
            </div>

            <div class="segmented" id="rangeSeg">
              <button class="segbtn active" data-range="month">M√™s</button>
              <button class="segbtn" data-range="year">Ano</button>
            </div>
          </div>

          <div class="chartgrid">
            <div class="chartcard">
              <div class="charttitle">Despesas por categoria</div>
              <canvas id="donut" height="190"></canvas>
            </div>

            <div class="chartcard">
              <div class="charttitle">Entradas x Sa√≠das</div>
              <canvas id="line" height="190"></canvas>
            </div>
          </div>
        </section>

        <section class="section glass">
          <div class="sectionhead">
            <div>
              <div class="sectiontitle">Gastos recentes</div>
              <div class="sectionsub">Com barras de or√ßamento</div>
            </div>
            <button class="ghost" id="btnGoTransactions">Ver todos</button>
          </div>

          <div class="recent" id="recentList"></div>
        </section>

        <section class="section glass">
          <div class="sectionhead">
            <div>
              <div class="sectiontitle">Metas & Caixinhas</div>
              <div class="sectionsub">Reserva por objetivo</div>
            </div>
            <button class="ghost" id="btnGoGoals">Gerenciar</button>
          </div>

          <div class="goals" id="goalsPreview"></div>
        </section>

        <div class="spacer"></div>
      </section>

      <!-- TRANSA√á√ïES -->
      <section class="page" id="page-transactions">
        <section class="pagetop glass">
          <div class="ptrow">
            <div>
              <div class="sectiontitle">Transa√ß√µes</div>
              <div class="sectionsub">Toque para excluir</div>
            </div>
            <button class="ghost" id="btnAddTxTop">Adicionar</button>
          </div>

          <div class="filters">
            <div class="filterpill">
              <span>Tipo</span>
              <select id="filterType">
                <option value="all">Todos</option>
                <option value="income">Entradas</option>
                <option value="expense">Sa√≠das</option>
              </select>
            </div>

            <div class="filterpill">
              <span>M√™s</span>
              <select id="filterMonth"></select>
            </div>
          </div>
        </section>

        <section class="list glass" id="txList"></section>
        <div class="spacer"></div>
      </section>

      <!-- CATEGORIAS -->
      <section class="page" id="page-categories">
        <section class="pagetop glass">
          <div class="ptrow">
            <div>
              <div class="sectiontitle">Categorias</div>
              <div class="sectionsub">Or√ßamentos por m√™s</div>
            </div>
            <button class="ghost" id="btnAddCategory">Adicionar</button>
          </div>
        </section>

        <section class="cats" id="catsGrid"></section>
        <div class="spacer"></div>
      </section>

      <!-- INVESTIMENTOS -->
      <section class="page" id="page-investments">
        <section class="pagetop glass">
          <div class="ptrow">
            <div>
              <div class="sectiontitle">Investimentos</div>
              <div class="sectionsub">Aportes e evolu√ß√£o</div>
            </div>
            <button class="ghost" id="btnAddInvestment">Novo</button>
          </div>
        </section>

        <section class="section glass">
          <div class="sectionhead">
            <div>
              <div class="sectiontitle">Total investido</div>
              <div class="sectionsub">Somat√≥rio dos aportes</div>
            </div>
            <div class="bigpill" id="investTotalPill">R$ 0,00</div>
          </div>
          <canvas id="investLine" height="190"></canvas>
        </section>

        <section class="list glass" id="invList"></section>
        <div class="spacer"></div>
      </section>

      <!-- METAS / CAIXINHAS -->
      <section class="page" id="page-goals">
        <section class="pagetop glass">
          <div class="ptrow">
            <div>
              <div class="sectiontitle">Metas & Caixinhas</div>
              <div class="sectionsub">Adicionar e editar reservas</div>
            </div>
            <button class="ghost" id="btnAddGoal">Adicionar</button>
          </div>
        </section>

        <section class="goals full" id="goalsList"></section>
        <div class="spacer"></div>
      </section>
    </main>

    <!-- BOTTOM NAV -->
    <nav class="bottomnav glass">
      <button class="tab active" data-tab="home">üè†<span>In√≠cio</span></button>
      <button class="tab" data-tab="transactions">üßæ<span>Trans.</span></button>

      <button class="fab" id="fabAdd" aria-label="Adicionar">Ôºã</button>

      <button class="tab" data-tab="categories">üß©<span>Cat.</span></button>
      <button class="tab" data-tab="investments">üìà<span>Invest</span></button>
      <button class="tab" data-tab="goals">üéØ<span>Metas</span></button>
    </nav>

    <!-- MODAL TX -->
    <div class="modal" id="modalTx" aria-hidden="true">
      <div class="modalcard glass">
        <div class="modalhead">
          <div class="modaltitle">Adicionar</div>
          <button class="iconbtn" id="btnCloseTx">‚úï</button>
        </div>

        <div class="modalbody">
          <div class="row2">
            <label class="field">
              <span>Tipo</span>
              <select id="txType">
                <option value="expense">Sa√≠da</option>
                <option value="income">Entrada</option>
              </select>
            </label>
            <label class="field">
              <span>Data</span>
              <input type="date" id="txDate" />
            </label>
          </div>

          <label class="field">
            <span>Descri√ß√£o</span>
            <input type="text" id="txDesc" placeholder="Ex: Supermercado" maxlength="40" />
          </label>

          <div class="row2">
            <label class="field">
              <span>Categoria</span>
              <select id="txCategory"></select>
            </label>
            <label class="field">
              <span>Valor (R$)</span>
              <input type="number" id="txAmount" step="0.01" inputmode="decimal" placeholder="0,00" />
            </label>
          </div>

          <label class="field">
            <span>Caixinha (opcional)</span>
            <select id="txGoal">
              <option value="">Nenhuma</option>
            </select>
          </label>

          <div class="actions">
            <button class="btn secondary" id="btnCancelTx">Cancelar</button>
            <button class="btn primary" id="btnSaveTx">Salvar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL CATEGORY -->
    <div class="modal" id="modalCat" aria-hidden="true">
      <div class="modalcard glass">
        <div class="modalhead">
          <div class="modaltitle">Nova categoria</div>
          <button class="iconbtn" id="btnCloseCat">‚úï</button>
        </div>

        <div class="modalbody">
          <label class="field">
            <span>Nome</span>
            <input type="text" id="catName" maxlength="24" placeholder="Ex: Sa√∫de" />
          </label>

          <div class="row2">
            <label class="field">
              <span>Or√ßamento mensal (R$)</span>
              <input type="number" id="catBudget" step="0.01" inputmode="decimal" placeholder="0,00" />
            </label>
            <label class="field">
              <span>√çcone (emoji)</span>
              <input type="text" id="catEmoji" maxlength="2" placeholder="Ex: üõí" />
            </label>
          </div>

          <label class="field">
            <span>Cor</span>
            <input type="color" id="catColor" value="#4aa3ff" />
          </label>

          <div class="actions">
            <button class="btn secondary" id="btnCancelCat">Cancelar</button>
            <button class="btn primary" id="btnSaveCat">Salvar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL GOAL -->
    <div class="modal" id="modalGoal" aria-hidden="true">
      <div class="modalcard glass">
        <div class="modalhead">
          <div class="modaltitle">Meta / Caixinha</div>
          <button class="iconbtn" id="btnCloseGoal">‚úï</button>
        </div>

        <div class="modalbody">
          <label class="field">
            <span>Nome</span>
            <input type="text" id="goalName" maxlength="26" placeholder="Ex: Reserva Emerg√™ncia" />
          </label>

          <div class="row2">
            <label class="field">
              <span>Meta (R$)</span>
              <input type="number" id="goalTarget" step="0.01" inputmode="decimal" placeholder="0,00" />
            </label>
            <label class="field">
              <span>Atual (R$)</span>
              <input type="number" id="goalCurrent" step="0.01" inputmode="decimal" placeholder="0,00" />
            </label>
          </div>

          <div class="actions">
            <button class="btn secondary" id="btnCancelGoal">Cancelar</button>
            <button class="btn primary" id="btnSaveGoal">Salvar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL INVEST -->
    <div class="modal" id="modalInv" aria-hidden="true">
      <div class="modalcard glass">
        <div class="modalhead">
          <div class="modaltitle">Novo aporte</div>
          <button class="iconbtn" id="btnCloseInv">‚úï</button>
        </div>

        <div class="modalbody">
          <div class="row2">
            <label class="field">
              <span>Data</span>
              <input type="date" id="invDate" />
            </label>
            <label class="field">
              <span>Valor (R$)</span>
              <input type="number" id="invAmount" step="0.01" inputmode="decimal" placeholder="0,00" />
            </label>
          </div>

          <label class="field">
            <span>Descri√ß√£o</span>
            <input type="text" id="invDesc" maxlength="40" placeholder="Ex: Aporte CDB" />
          </label>

          <div class="actions">
            <button class="btn secondary" id="btnCancelInv">Cancelar</button>
            <button class="btn primary" id="btnSaveInv">Salvar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- IMPORT FILE -->
    <input type="file" id="fileImport" accept="application/json" hidden />
  </div>

  <script src="./app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => navigator.serviceWorker.register("./sw.js"));
    }
  </script>
</body>
</html>