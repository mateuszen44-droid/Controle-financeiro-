<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b1220" />
  <title>Financeiro Matheus e Tha√≠s</title>

  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./styles.css?v=2" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
</head>

<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="brandIcon">üí∞</div>
        <div>
          <div class="brandTitle">Financeiro</div>
          <div class="brandSub">Matheus e Tha√≠s</div>
        </div>
      </div>

      <div class="topActions">
        <button class="iconBtn" id="btnBackup" title="Backup">‚¨áÔ∏è</button>
        <button class="iconBtn" id="btnMoreTop" title="Mais">‚ãØ</button>
      </div>
    </header>

    <main class="content">

      <section class="view active" id="view-home">
        <div class="card">
          <div class="cardRow">
            <div class="muted">Total Balance</div>
            <div class="tinyDots" id="monthBadge">‚Äî</div>
          </div>

          <div class="balanceValue" id="balanceValue">R$ 0,00</div>

          <div class="pillsRow">
            <button class="pill pillIncome" id="pillIncome">
              <div class="pillIcon">Ôºã</div>
              <div class="pillMain">
                <div class="pillTitle">Entradas</div>
                <div class="pillValue" id="sumIncome">R$ 0,00</div>
              </div>
              <div class="pillArrow">‚Ä∫</div>
            </button>

            <button class="pill pillExpense" id="pillExpense">
              <div class="pillIcon">Ôºç</div>
              <div class="pillMain">
                <div class="pillTitle">Sa√≠das</div>
                <div class="pillValue" id="sumExpense">R$ 0,00</div>
              </div>
              <div class="pillArrow">‚Ä∫</div>
            </button>
          </div>

          <div class="miniRow">
            <div class="miniBox">
              <div class="miniLabel">Investido</div>
              <div class="miniValue" id="sumInvest">R$ 0,00</div>
            </div>
            <div class="miniBox">
              <div class="miniLabel">Reserva / Caixinhas</div>
              <div class="miniValue" id="sumBoxes">R$ 0,00</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardRow">
            <div class="cardTitle">Vis√£o do m√™s</div>
            <div class="filters">
              <select id="selectMonth"></select>
            </div>
          </div>

          <div class="chartGrid">
            <div class="chartCard">
              <div class="chartTitle">Despesas por categoria</div>
              <canvas id="chartExpenses"></canvas>
            </div>
            <div class="chartCard">
              <div class="chartTitle">Saldo ao longo do m√™s</div>
              <canvas id="chartBalance"></canvas>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardRow">
            <div class="cardTitle">Gastos recentes</div>
            <button class="pillBtn" id="btnAddFromHome">Ôºã Adicionar</button>
          </div>
          <div class="list" id="recentList"></div>
        </div>
      </section>

      <section class="view" id="view-add">
        <div class="card formCard">
          <div class="cardRow">
            <div class="cardTitle">Adicionar transa√ß√£o</div>
            <div class="badge" id="badgeType">Sa√≠da</div>
          </div>

          <div class="typeToggle">
            <button class="typeBtn" data-type="income">Entrada</button>
            <button class="typeBtn active" data-type="expense">Sa√≠da</button>
            <button class="typeBtn" data-type="investment">Invest.</button>
          </div>

          <div class="formGrid">
            <label class="field">
              <span>Valor (R$)</span>
              <input id="txAmount" inputmode="decimal" placeholder="0,00" />
            </label>

            <label class="field">
              <span>Data</span>
              <input id="txDate" type="date" />
            </label>

            <label class="field" style="grid-column: 1 / -1;">
              <span>Categoria</span>
              <select id="txCategory"></select>
            </label>

            <label class="field" style="grid-column: 1 / -1;">
              <span>Descri√ß√£o (opcional)</span>
              <input id="txNote" placeholder="Ex: Mercado, Uber, PIX..." />
            </label>
          </div>

          <div class="formActions">
            <button class="btnPrimary" id="btnSaveTx">Salvar</button>
            <button class="btnSecondary" id="btnCancelTx">Cancelar</button>
          </div>

          <div class="hint">Dica: clique em uma transa√ß√£o para editar/apagar.</div>
        </div>
      </section>

      <section class="view" id="view-categories">
        <div class="card">
          <div class="cardRow">
            <div class="cardTitle">Categorias & Or√ßamentos</div>
            <button class="pillBtn" id="btnAddCategory">Ôºã Nova</button>
          </div>

          <div class="hint">
            Para categorias de <b>Sa√≠da</b>, voc√™ pode colocar <b>or√ßamento mensal</b> e ver a barra de consumo.
          </div>

          <div class="segmented">
            <button class="segBtn active" data-catfilter="expense">Sa√≠das</button>
            <button class="segBtn" data-catfilter="income">Entradas</button>
            <button class="segBtn" data-catfilter="investment">Invest.</button>
          </div>

          <div class="list" id="catList"></div>
        </div>
      </section>

      <section class="view" id="view-invest">
        <div class="card">
          <div class="cardRow">
            <div class="cardTitle">Investimentos</div>
            <button class="pillBtn" id="btnAddInvest">Ôºã Investir</button>
          </div>

          <div class="investTop">
            <div class="investBox">
              <div class="miniLabel">Total investido</div>
              <div class="investValue" id="investTotal">R$ 0,00</div>
            </div>
            <div class="investBox">
              <div class="miniLabel">Aporte no m√™s</div>
              <div class="investValue" id="investMonth">R$ 0,00</div>
            </div>
          </div>

          <div class="chartCard" style="margin-top:12px;">
            <div class="chartTitle">Aportes por categoria</div>
            <canvas id="chartInvest"></canvas>
          </div>

          <div class="cardRow" style="margin-top:12px;">
            <div class="cardTitle">√öltimos aportes</div>
          </div>
          <div class="list" id="investList"></div>
        </div>
      </section>

      <section class="view" id="view-goals">
        <div class="card">
          <div class="cardRow">
            <div class="cardTitle">Metas & Caixinhas</div>
            <button class="pillBtn" id="btnAddGoal">Ôºã Criar</button>
          </div>

          <div class="segmented">
            <button class="segBtn active" data-goalfilter="all">Tudo</button>
            <button class="segBtn" data-goalfilter="box">Caixinhas</button>
            <button class="segBtn" data-goalfilter="goal">Metas</button>
          </div>

          <div class="list" id="goalList"></div>
        </div>
      </section>

      <section class="view" id="view-more">
        <div class="card">
          <div class="cardRow">
            <div class="cardTitle">Backup & Seguran√ßa</div>
            <div class="tinyDots">‚ãØ</div>
          </div>

          <div class="formActions">
            <button class="btnPrimary" id="btnExport">Exportar Backup</button>
            <button class="btnSecondary" id="btnImport">Importar</button>
          </div>

          <input id="fileImport" type="file" accept="application/json" style="display:none" />

          <div class="formActions" style="margin-top:12px;">
            <button class="btnDanger" id="btnReset">Zerar tudo</button>
          </div>
        </div>
      </section>
    </main>

    <nav class="bottomNav">
      <div class="navShell">
        <button class="navBtn active" data-go="home">üè† <span>In√≠cio</span></button>
        <button class="navBtn" data-go="categories">üß© <span>Categorias</span></button>
        <button class="navBtn center" data-go="add">Ôºã</button>
        <button class="navBtn" data-go="invest">üìà <span>Invest.</span></button>
        <button class="navBtn" data-go="goals">üéØ <span>Metas</span></button>
      </div>
    </nav>
  </div>

  <script src="./app.js?v=2"></script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js").catch(()=>{});
      });
    }
  </script>
</body>
</html>